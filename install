#!/bin/bash
if [ -d ~/.dotfiles ]
then
  LAST_DIR=$(pwd)
  echo "Pulling from master"
  cd ~/.dotfiles
  git pull --rebase origin master
  cd $LAST_DIR
else
  echo "Cloning git@github.com:kurko/.dotfiles.git into ~/.dotfiles"
  git clone git@github.com:kurko/.dotfiles.git ~/.dotfiles
fi

if [ ! -d ~/.vim/bundle/Vundle.vim ]
then
  echo "Install Vim's Vundle on ~/.vim/bundle/Vundle.vim"
  git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
  vim +PluginInstall +qall
fi

if [ ! -d ~/.tmux/plugins/tpm ]
then
  echo "Install Tmux Plugin Manager on ~/.tmux/plugins/tpm"
  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
  ~/.tmux/plugins/tpm/bin/install_plugins
fi

echo "Loading ~/.dotfiles/bashrc_source"
source ~/.dotfiles/bashrc_source

echo "Updating scripts and aliases"
update_dotfiles

# MacOS?
if [[ "$OSTYPE" == "darwin"* ]]; then
  source $DOTFILES/installation/macos
  install_macos
#elif [[ "$OSTYPE" == "linux-gnu" ]]; then
  # ...
fi


